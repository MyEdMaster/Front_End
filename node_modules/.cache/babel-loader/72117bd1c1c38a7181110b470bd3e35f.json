{"ast":null,"code":"import _classCallCheck from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/vivian/Desktop/frondend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vivian/Desktop/frondend/src/page/RRH/Page/end.js\";\nimport React from 'react';\nimport classes from '../../ComplexNumber/Page/index.module.css';\nimport classes2 from './index.module.css';\nimport { AskQuestion } from \"../Component/ask-question\";\nimport { MDBBtn, MDBCard, MDBCol, MDBIcon, MDBModalBody, MDBRow } from \"mdbreact\";\nimport { handleSyn } from \"../Component/speech-syn\";\nimport { cancelSyn } from \"../Component/speech-syn\";\nimport { url } from \"../../../tool/fetch-help\";\nimport Joyride from 'react-joyride';\nvar SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\nvar recognition = new SpeechRecognition();\nrecognition.continous = true;\nrecognition.interimResults = true;\nrecognition.lang = 'en-US';\nexport var End =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(End, _React$Component);\n\n  function End(props) {\n    var _this;\n\n    _classCallCheck(this, End);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(End).call(this, props));\n\n    _this.searchAnswer = function (value) {\n      var option = {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          question_id: _this.state.backend.content[_this.state.index].id,\n          answer: value // \"question\":this.state.backend.content[this.state.index].id,\n          // \"answer\":value\n\n        })\n      };\n      fetch(\"\".concat(url, \"/analyse_answer/a1\"), option).then(function (response) {\n        return response.json();\n      }).then(function (answer) {\n        _this.setState({\n          backendjson: answer\n        });\n\n        switch (answer.type) {\n          case '1':\n            _this.setState({\n              feedback: '',\n              index: _this.state.index + 1,\n              type: 1,\n              tag: 'Yes! You got it.'\n            });\n\n            handleSyn('Yes! You got it.');\n\n            if (_this.state.index <= _this.state.backend.content.length) {\n              handleSyn(_this.state.backend.content[_this.state.index].question.replace('?', '.'));\n            }\n\n            break;\n\n          case '2':\n            _this.setState({\n              tag: 'Is that what you are answering?',\n              feedback: answer.answer,\n              type: 2\n            });\n\n            handleSyn('Is that what you are answering');\n            handleSyn(answer.answer.replace('?', '.'));\n            break;\n\n          case '3':\n            _this.setState({\n              feedback: answer.answer,\n              tag: 'No.',\n              type: 3\n            });\n\n            handleSyn('No, the answer is');\n            handleSyn(answer.answer.replace('?', '.'));\n        }\n      });\n    };\n\n    _this.state = {\n      listening: false,\n      speechState: 'Click to start...',\n      hints: '',\n      backendjson: '',\n      question: '',\n      backend: '',\n      answer: '',\n      tag: '',\n      type: 0,\n      render: 0,\n      index: 0,\n      feedback: '',\n      steps: [{\n        target: \".question\",\n        content: \"We ask your questions to make sure if you understand our story. Once your answer is right, there will be a new question\"\n      }, {\n        target: \".input\",\n        content: \"Input your answer here\"\n      }]\n    };\n    _this.toggleListen = _this.toggleListen.bind(_assertThisInitialized(_this));\n    _this.handleListen = _this.handleListen.bind(_assertThisInitialized(_this));\n    _this.searchAnswer = _this.searchAnswer.bind(_assertThisInitialized(_this));\n    _this.onKeyup = _this.onKeyup.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(End, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var option = {\n        method: 'GET',\n        headers: {\n          'content-type': 'application/json'\n        }\n      };\n      fetch(\"\".concat(url, \"/feedback/question\"), option).then(function (response) {\n        return response.json();\n      }).then(function (question) {\n        _this2.setState({\n          backend: question,\n          render: 1\n        });\n\n        handleSyn(_this2.state.backend.content[0].question.replace('?', '.'));\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      handleSyn(this.state.answer);\n    }\n  }, {\n    key: \"toggleListen\",\n    //--------------Speech Recognition--------------\n    value: function toggleListen() {\n      cancelSyn();\n      this.setState({\n        listening: !this.state.listening\n      }, this.handleListen);\n    }\n  }, {\n    key: \"handleListen\",\n    value: function handleListen() {\n      var _this3 = this;\n\n      console.log('listening?', this.state.listening);\n\n      if (this.state.listening) {\n        recognition.start();\n\n        recognition.onend = function () {\n          _this3.setState({\n            speechState: '...continue listening...'\n          });\n\n          recognition.start();\n        };\n      } else {\n        recognition.stop();\n\n        recognition.onend = function () {\n          _this3.setState({\n            speechState: 'Click to start...'\n          });\n        };\n      }\n\n      recognition.onstart = function () {\n        _this3.setState({\n          speechState: 'Listening...Click to pause'\n        });\n      };\n\n      var finalTranscript = '';\n\n      recognition.onresult = function (event) {\n        var interimTranscript = '';\n\n        for (var i = event.resultIndex; i < event.results.length; i++) {\n          var transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) finalTranscript += transcript + ' ';else interimTranscript += transcript;\n        }\n\n        _this3.setState({\n          answer: finalTranscript\n        });\n\n        document.getElementById('interim').innerHTML = interimTranscript;\n        document.getElementById('final').value = finalTranscript; //-------------------------COMMANDS------------------------------------\n\n        var transcriptArr = finalTranscript.split(' ');\n        var stopCmd = transcriptArr.slice(-3, -1);\n        console.log('stopCmd', stopCmd);\n\n        if (stopCmd[0] === 'stop' && stopCmd[1] === 'listening') {\n          recognition.stop();\n\n          recognition.onend = function () {\n            console.log('Stopped listening per command');\n            var finalText = transcriptArr.slice(0, -3).join(' ');\n            document.getElementById('final').value = finalText;\n          };\n        }\n      }; //-----------------------------------------------------------------------\n\n\n      recognition.onerror = function (event) {\n        console.log(\"Error occurred in recognition: \" + event.error);\n      };\n    }\n  }, {\n    key: \"onKeyup\",\n    value: function onKeyup(e) {\n      if (e.keyCode === 13) {\n        this.searchAnswer(this.state.answer);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      if (this.state.render === 1) {\n        var steps = this.state.steps; //console.log(this.state.backend.content[0])\n\n        return React.createElement(\"div\", {\n          className: \"\".concat(classes.body, \" align-content-center w-100 h-100 text-center\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, React.createElement(Joyride, {\n          steps: steps,\n          continuous: true,\n          scrollToFirstStep: true,\n          scrollToSteps: false,\n          styles: {\n            options: {\n              primaryColor: '#54B948',\n              zIndex: 1000\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }), React.createElement(AskQuestion, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"d-flex align-items-baseline justify-content-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: classes.title1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, \"Q & A\")), React.createElement(MDBRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        }, React.createElement(MDBCol, {\n          size: \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }), React.createElement(MDBCol, {\n          size: \"8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: classes2.ph,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }, \"Great! Now you read the story and we have some question for you to answer.\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: classes2.border,\n          style: {\n            borderWidth: '1px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"\".concat(classes2.ph, \" question\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }, this.state.index <= this.state.backend.content.length ? this.state.backend.content[this.state.index].question : 'All questions have been done!'), React.createElement(\"div\", {\n          className: \"d-flex justify-content-center align-content-start mt-3 mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"flex-grow-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          id: \"final\",\n          className: \"form-control form-control-lg input \".concat(classes.searchInput),\n          placeholder: \"Answer question here\",\n          style: {\n            borderStyle: 'solid',\n            borderWidth: '1px',\n            borderColor: '#81c784',\n            borderRadius: '15px',\n            fontFamily: '\\'Rajdhani\\', sans-serif',\n            fontSize: '22px'\n          },\n          onChange: function onChange(e) {\n            var str = e.target.value;\n\n            _this4.setState({\n              answer: str\n            });\n          },\n          onKeyDown: this.onKeyup,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"ml-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }, React.createElement(MDBBtn, {\n          tag: \"a\",\n          floating: true,\n          color: \"green\",\n          style: {\n            margin: '6px'\n          },\n          onClick: function onClick() {\n            _this4.searchAnswer(_this4.state.answer);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, React.createElement(MDBIcon, {\n          icon: \"question\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"ml-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, React.createElement(MDBBtn, {\n          tag: \"a\",\n          floating: true,\n          color: \"purple lighten-2\",\n          style: {\n            margin: '6px'\n          },\n          onClick: this.toggleListen,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(MDBIcon, {\n          icon: \"microphone\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        })))), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: classes2.body2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, this.state.speechState), React.createElement(\"div\", {\n          id: \"interim\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, React.createElement(MDBCard, {\n          size: \"8\",\n          text: \"white\",\n          className: \"py-1 px-3 w-100\",\n          style: {\n            boxShadow: 'none',\n            borderRadius: '0px',\n            backgroundColor: '#e8eaf6'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: classes2.pb2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, this.state.tag), React.createElement(\"p\", {\n          className: classes2.pb2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, this.state.feedback), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }, this.state.type === 2 ? React.createElement(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, React.createElement(MDBBtn, {\n          tag: \"a\",\n          floating: true,\n          className: \"green\",\n          onClick: function onClick() {\n            cancelSyn();\n\n            _this4.setState({\n              type: 1,\n              tag: 'Yes, you got it',\n              index: _this4.state.index + 1,\n              feedback: _this4.state.backendjson.answer\n            });\n\n            handleSyn('Yes, you got it.');\n            handleSyn(_this4.state.backend.content[_this4.state.index].question);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311\n          },\n          __self: this\n        }, React.createElement(MDBIcon, {\n          icon: \"check\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        })), React.createElement(MDBBtn, {\n          tag: \"a\",\n          floating: true,\n          className: \"red lighten-1\",\n          onClick: function onClick() {\n            cancelSyn();\n\n            _this4.setState({\n              type: 1,\n              tag: 'No',\n              feedback: _this4.state.backendjson.answer\n            });\n\n            handleSyn('No, the answer is');\n            handleSyn(_this4.state.backendjson.answer.replace('?', '.'));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        }, React.createElement(MDBIcon, {\n          icon: \"times\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 341\n          },\n          __self: this\n        }))) : null)))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 350\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          style: {\n            padding: '30px 0 250px 0'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          onClick: function onClick() {\n            _this4.props.history.goBack();\n          },\n          className: classes2.a,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355\n          },\n          __self: this\n        }, \"\\xAB Previous\"), React.createElement(\"div\", {\n          onClick: function onClick() {\n            _this4.props.history.push('/rrh/cover');\n          },\n          className: classes2.a,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359\n          },\n          __self: this\n        }, \"Again \\xBB\")));\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return End;\n}(React.Component);","map":{"version":3,"sources":["/Users/vivian/Desktop/frondend/src/page/RRH/Page/end.js"],"names":["React","classes","classes2","AskQuestion","MDBBtn","MDBCard","MDBCol","MDBIcon","MDBModalBody","MDBRow","handleSyn","cancelSyn","url","Joyride","SpeechRecognition","window","webkitSpeechRecognition","recognition","continous","interimResults","lang","End","props","searchAnswer","value","option","method","headers","body","JSON","stringify","question_id","state","backend","content","index","id","answer","fetch","then","response","json","setState","backendjson","type","feedback","tag","length","question","replace","listening","speechState","hints","render","steps","target","toggleListen","bind","handleListen","onKeyup","console","log","start","onend","stop","onstart","finalTranscript","onresult","event","interimTranscript","i","resultIndex","results","transcript","isFinal","document","getElementById","innerHTML","transcriptArr","split","stopCmd","slice","finalText","join","onerror","error","e","keyCode","options","primaryColor","zIndex","title1","ph","border","borderWidth","searchInput","borderStyle","borderColor","borderRadius","fontFamily","fontSize","str","margin","body2","boxShadow","backgroundColor","pb2","padding","history","goBack","a","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport classes from '../../ComplexNumber/Page/index.module.css';\nimport classes2 from './index.module.css'\n\nimport {AskQuestion} from \"../Component/ask-question\";\nimport {MDBBtn, MDBCard, MDBCol, MDBIcon, MDBModalBody, MDBRow} from \"mdbreact\";\nimport {handleSyn} from \"../Component/speech-syn\";\nimport {cancelSyn} from \"../Component/speech-syn\";\nimport {url} from \"../../../tool/fetch-help\";\nimport Joyride from 'react-joyride';\n\nconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\nconst recognition = new SpeechRecognition();\n\nrecognition.continous = true;\nrecognition.interimResults = true;\nrecognition.lang = 'en-US';\n\nexport class End extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            listening: false,\n            speechState:'Click to start...',\n            hints:'',\n            backendjson:'',\n            question:'',\n            backend:'',\n            answer:'',\n            tag:'',\n            type:0,\n            render:0,\n            index:0,\n            feedback:'',\n            steps: [\n                {\n                    target: \".question\",\n                    content: \"We ask your questions to make sure if you understand our story. Once your answer is right, there will be a new question\"\n                },\n                {\n                    target: \".input\",\n                    content: \"Input your answer here\"\n                }\n            ]\n        };\n        this.toggleListen = this.toggleListen.bind(this)\n        this.handleListen = this.handleListen.bind(this)\n        this.searchAnswer = this.searchAnswer.bind(this)\n        this.onKeyup = this.onKeyup.bind(this)\n    }\n    componentDidMount() {\n        const option={\n            method:'GET',\n            headers: {\n                'content-type': 'application/json',\n            }\n        }\n        fetch(`${url}/feedback/question`,option)\n            .then(response=>response.json())\n            .then(question=>{\n                this.setState({\n                    backend:question,\n                    render:1\n                })\n                handleSyn(this.state.backend.content[0].question.replace('?', '.'))\n            })\n    }\n    componentWillMount() {\n        handleSyn(this.state.answer)\n    }\n\n\n    searchAnswer=(value)=>{\n        const option={\n            method:'POST',\n            headers: {\n                'content-type': 'application/json',\n            },\n            body:JSON.stringify({\n                question_id:this.state.backend.content[this.state.index].id,\n                answer:value,\n                // \"question\":this.state.backend.content[this.state.index].id,\n                // \"answer\":value\n            })\n        };\n        fetch(`${url}/analyse_answer/a1`,option)\n            .then(response=>response.json())\n            .then(answer=>{\n                this.setState({\n                    backendjson:answer\n                })\n                switch (answer.type) {\n                    case '1':\n                        this.setState({\n                            feedback:'',\n                            index:this.state.index + 1,\n                            type:1,\n                            tag:'Yes! You got it.'\n                        });\n                        handleSyn('Yes! You got it.');\n                        if(this.state.index <= this.state.backend.content.length){\n                            handleSyn(this.state.backend.content[this.state.index].question.replace('?', '.'))\n                        }\n                        break;\n                    case '2':\n                        this.setState({\n                            tag:'Is that what you are answering?',\n                            feedback:answer.answer,\n                            type:2\n                        });\n                        handleSyn('Is that what you are answering');\n                        handleSyn((answer.answer.replace('?', '.')));\n\n                        break;\n                    case '3':\n                        this.setState({\n                            feedback:answer.answer,\n                            tag:'No.',\n                            type:3\n                        });\n                        handleSyn('No, the answer is');\n                        handleSyn((answer.answer.replace('?', '.')));\n                }\n            })\n    }\n\n    //--------------Speech Recognition--------------\n    toggleListen() {\n        cancelSyn()\n        this.setState({\n            listening: !this.state.listening\n        }, this.handleListen)\n    }\n\n    handleListen() {\n\n        console.log('listening?', this.state.listening)\n\n        if (this.state.listening) {\n            recognition.start();\n            recognition.onend = () => {\n                this.setState({\n                    speechState:'...continue listening...'\n                });\n                recognition.start()\n            }\n\n        } else {\n            recognition.stop();\n            recognition.onend = () => {\n                this.setState({\n                    speechState:'Click to start...'\n                });\n            }\n        }\n\n        recognition.onstart = () => {\n            this.setState({\n                speechState:'Listening...Click to pause'\n            });\n        };\n\n        let finalTranscript = '';\n        recognition.onresult = event => {\n            let interimTranscript = '';\n\n            for (let i = event.resultIndex; i < event.results.length; i++) {\n                const transcript = event.results[i][0].transcript;\n                if (event.results[i].isFinal) finalTranscript += transcript + ' ';\n                else interimTranscript += transcript;\n            }\n\n            this.setState({\n                answer:finalTranscript\n            });\n            document.getElementById('interim').innerHTML = interimTranscript;\n            document.getElementById('final').value = finalTranscript;\n\n            //-------------------------COMMANDS------------------------------------\n\n            const transcriptArr = finalTranscript.split(' ');\n            const stopCmd = transcriptArr.slice(-3, -1);\n            console.log('stopCmd', stopCmd);\n\n            if (stopCmd[0] === 'stop' && stopCmd[1] === 'listening'){\n                recognition.stop();\n                recognition.onend = () => {\n                    console.log('Stopped listening per command');\n                    const finalText = transcriptArr.slice(0, -3).join(' ');\n                    document.getElementById('final').value = finalText\n                }\n            }\n        }\n\n        //-----------------------------------------------------------------------\n\n        recognition.onerror = event => {\n            console.log(\"Error occurred in recognition: \" + event.error)\n        }\n\n    }\n\n    onKeyup(e) {\n        if(e.keyCode === 13) {\n            this.searchAnswer(this.state.answer)}\n    }\n\n    render() {\n        if (this.state.render === 1){\n            const { steps } = this.state;\n            //console.log(this.state.backend.content[0])\n            return (\n                <div className={`${classes.body} align-content-center w-100 h-100 text-center`}>\n                    <Joyride\n                        steps={steps}\n                        continuous={true}\n                        scrollToFirstStep={true}\n                        scrollToSteps={false}\n                        styles={{\n                            options: {\n                                primaryColor: '#54B948',\n                                zIndex: 1000,\n                            }\n                        }}\n                    />\n                    <AskQuestion/>\n\n                    <div className=\"d-flex align-items-baseline justify-content-center\">\n                        <div className={classes.title1}>\n                            Q & A\n                        </div>\n                    </div>\n                    <MDBRow>\n                        <MDBCol size=\"2\">\n\n                        </MDBCol>\n                        <MDBCol size=\"8\">\n                            <div className={classes2.ph}>\n                                Great! Now you read the story and we have some question for you to answer.\n                            </div>\n                            <br/>\n\n                            <div className={classes2.border} style={{borderWidth:'1px'}}>\n\n                                <p className={`${classes2.ph} question`}>\n                                    {this.state.index <= this.state.backend.content.length?\n                                        this.state.backend.content[this.state.index].question\n                                        :'All questions have been done!'}\n                                </p>\n\n                                <div className=\"d-flex justify-content-center align-content-start mt-3 mb-3\">\n                                    <div className=\"flex-grow-1\">\n                                        <input\n                                            id='final'\n                                            className={`form-control form-control-lg input ${classes.searchInput}`}\n                                            placeholder=\"Answer question here\"\n                                            style={{\n                                                borderStyle:'solid',\n                                                borderWidth:'1px',\n                                                borderColor:'#81c784',\n                                                borderRadius:'15px',\n                                                fontFamily:'\\'Rajdhani\\', sans-serif',\n                                                fontSize:'22px',\n                                            }}\n                                            onChange={(e) => {\n                                                const str=e.target.value\n                                                this.setState({\n                                                    answer: str\n                                                });\n                                            }}\n                                            onKeyDown={this.onKeyup}\n                                        />\n                                    </div>\n                                    <div className=\"ml-3\">\n                                        <MDBBtn\n                                            tag=\"a\" floating color=\"green\" style={{margin:'6px'}}\n                                            onClick={()=>{this.searchAnswer(this.state.answer)}}\n                                        >\n                                            <MDBIcon icon=\"question\" />\n                                        </MDBBtn>\n                                    </div>\n                                    <div className=\"ml-1\">\n                                        <MDBBtn\n                                            tag=\"a\" floating color=\"purple lighten-2\" style={{margin:'6px'}}\n                                            onClick={this.toggleListen}\n                                        >\n                                            <MDBIcon icon=\"microphone\" />\n                                        </MDBBtn>\n\n                                    </div>\n                                </div>\n                                <div>\n                                    <div className={classes2.body2}>{this.state.speechState}</div>\n                                    <div id='interim'></div>\n                                </div>\n                                <div className=\"mt-3\">\n                                    <MDBCard\n                                        size=\"8\"\n                                        text=\"white\"\n                                        className=\"py-1 px-3 w-100\"\n                                        style={{boxShadow:'none', borderRadius:'0px',backgroundColor:'#e8eaf6'}}\n                                    >\n\n                                        <p className={classes2.pb2}>{this.state.tag}</p>\n\n                                        <p className={classes2.pb2}>{this.state.feedback}</p>\n                                        <div>\n                                            {this.state.type === 2? (\n                                                <div className=\"d-flex justify-content-center align-items-center\">\n\n                                                    <MDBBtn\n                                                        tag=\"a\" floating className=\"green\"\n                                                        onClick={()=>{\n                                                            cancelSyn()\n                                                            this.setState({\n                                                                type:1,\n                                                                tag:'Yes, you got it',\n                                                                index:this.state.index + 1,\n                                                                feedback:this.state.backendjson.answer\n                                                            });\n                                                            handleSyn('Yes, you got it.');\n                                                            handleSyn(this.state.backend.content[this.state.index].question)\n\n                                                        }}\n                                                    >\n                                                        <MDBIcon icon=\"check\" />\n                                                    </MDBBtn>\n                                                    <MDBBtn\n                                                        tag=\"a\" floating className=\"red lighten-1\"\n                                                        onClick={()=>{\n                                                            cancelSyn()\n                                                            this.setState({\n                                                                type:1,\n                                                                tag:'No',\n                                                                feedback:this.state.backendjson.answer\n                                                            })\n                                                            handleSyn('No, the answer is')\n                                                            handleSyn((this.state.backendjson.answer.replace('?', '.')));\n                                                        }}\n                                                    >\n                                                        <MDBIcon icon=\"times\" />\n                                                    </MDBBtn>\n                                                </div>\n                                            ):(null)\n                                            }\n                                        </div>\n                                    </MDBCard>\n                                </div>\n                            </div>\n                            <br/>\n                        </MDBCol>\n\n                    </MDBRow>\n                    <div style={{padding:'30px 0 250px 0'}}>\n                        <div\n                            onClick={() => {this.props.history.goBack();}}\n                            className={classes2.a}>&laquo; Previous\n                        </div>\n                        <div\n                            onClick={() => {this.props.history.push('/rrh/cover');}}\n                            className={classes2.a}>Again &raquo;\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n        else{\n            return(\n                null\n            );\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}